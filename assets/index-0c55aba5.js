var Ee=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports);var Fe=Ee((xe,S)=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const k of c.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&a(k)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();var S={};(function i(n,t,a,l){var c=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL);function k(){}function T(r){var e=t.exports.Promise,h=e!==void 0?e:n.Promise;return typeof h=="function"?new h(r):(r(k,k),null)}var C=function(){var r=Math.floor(16.666666666666668),e,h,s={},p=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var u=Math.random();return s[u]=requestAnimationFrame(function d(b){p===b||p+r-1<b?(p=b,delete s[u],f()):s[u]=requestAnimationFrame(d)}),u},h=function(f){s[f]&&cancelAnimationFrame(s[f])}):(e=function(f){return setTimeout(f,r)},h=function(f){return clearTimeout(f)}),{frame:e,cancel:h}}(),I=function(){var r,e,h={};function s(p){function f(u,d){p.postMessage({options:u||{},callback:d})}p.init=function(d){var b=d.transferControlToOffscreen();p.postMessage({canvas:b},[b])},p.fire=function(d,b,E){if(e)return f(d,null),e;var w=Math.random().toString(36).slice(2);return e=T(function(M){function y(g){g.data.callback===w&&(delete h[w],p.removeEventListener("message",y),e=null,E(),M())}p.addEventListener("message",y),f(d,w),h[w]=y.bind(null,{data:{callback:w}})}),e},p.reset=function(){p.postMessage({reset:!0});for(var d in h)h[d](),delete h[d]}}return function(){if(r)return r;if(!a&&c){var p=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([p])))}catch(f){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",f),null}s(r)}return r}}(),G={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function L(r,e){return e?e(r):r}function N(r){return r!=null}function v(r,e,h){return L(r&&N(r[e])?r[e]:G[e],h)}function F(r){return r<0?0:Math.floor(r)}function le(r,e){return Math.floor(Math.random()*(e-r))+r}function U(r){return parseInt(r,16)}function ae(r){return r.map(ie)}function ie(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:U(e.substring(0,2)),g:U(e.substring(2,4)),b:U(e.substring(4,6))}}function ce(r){var e=v(r,"origin",Object);return e.x=v(e,"x",Number),e.y=v(e,"y",Number),e}function se(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function ue(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function de(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function he(r,e,h,s,p,f,u,d,b){r.save(),r.translate(e,h),r.rotate(f),r.scale(s,p),r.arc(0,0,1,u,d,b),r.restore()}function fe(r){var e=r.angle*(Math.PI/180),h=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*h-Math.random()*h),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar}}function me(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.wobble+=e.wobbleSpeed,e.velocity*=e.decay,e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble);var h=e.tick++/e.totalTicks,s=e.x+e.random*e.tiltCos,p=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,u=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-h)+")",r.beginPath(),e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(f-s)*e.ovalScalar,Math.abs(u-p)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):he(r,e.x,e.y,Math.abs(f-s)*e.ovalScalar,Math.abs(u-p)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var d=Math.PI/2*3,b=4*e.scalar,E=8*e.scalar,w=e.x,M=e.y,y=5,g=Math.PI/y;y--;)w=e.x+Math.cos(d)*E,M=e.y+Math.sin(d)*E,r.lineTo(w,M),d+=g,w=e.x+Math.cos(d)*b,M=e.y+Math.sin(d)*b,r.lineTo(w,M),d+=g;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(p)),r.lineTo(Math.floor(f),Math.floor(u)),r.lineTo(Math.floor(s),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function pe(r,e,h,s,p){var f=e.slice(),u=r.getContext("2d"),d,b,E=T(function(w){function M(){d=b=null,u.clearRect(0,0,s.width,s.height),p(),w()}function y(){a&&!(s.width===l.width&&s.height===l.height)&&(s.width=r.width=l.width,s.height=r.height=l.height),!s.width&&!s.height&&(h(r),s.width=r.width,s.height=r.height),u.clearRect(0,0,s.width,s.height),f=f.filter(function(g){return me(u,g)}),f.length?d=C.frame(y):M()}d=C.frame(y),b=M});return{addFettis:function(w){return f=f.concat(w),E},canvas:r,promise:E,reset:function(){d&&C.cancel(d),b&&b()}}}function V(r,e){var h=!r,s=!!v(e||{},"resize"),p=v(e,"disableForReducedMotion",Boolean),f=c&&!!v(e||{},"useWorker"),u=f?I():null,d=h?se:ue,b=r&&u?!!r.__confetti_initialized:!1,E=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,w;function M(g,B,W){for(var A=v(g,"particleCount",F),$=v(g,"angle",Number),x=v(g,"spread",Number),H=v(g,"startVelocity",Number),we=v(g,"decay",Number),ge=v(g,"gravity",Number),be=v(g,"drift",Number),_=v(g,"colors",ae),ve=v(g,"ticks",Number),X=v(g,"shapes"),ke=v(g,"scalar"),Y=ce(g),j=A,z=[],ye=r.width*Y.x,Me=r.height*Y.y;j--;)z.push(fe({x:ye,y:Me,angle:$,spread:x,startVelocity:H,color:_[j%_.length],shape:X[le(0,X.length)],ticks:ve,decay:we,gravity:ge,drift:be,scalar:ke}));return w?w.addFettis(z):(w=pe(r,z,d,B,W),w.promise)}function y(g){var B=p||v(g,"disableForReducedMotion",Boolean),W=v(g,"zIndex",Number);if(B&&E)return T(function(H){H()});h&&w?r=w.canvas:h&&!r&&(r=de(W),document.body.appendChild(r)),s&&!b&&d(r);var A={width:r.width,height:r.height};u&&!b&&u.init(r),b=!0,u&&(r.__confetti_initialized=!0);function $(){if(u){var H={getBoundingClientRect:function(){if(!h)return r.getBoundingClientRect()}};d(H),u.postMessage({resize:{width:H.width,height:H.height}});return}A.width=A.height=null}function x(){w=null,s&&n.removeEventListener("resize",$),h&&r&&(document.body.removeChild(r),r=null,b=!1)}return s&&n.addEventListener("resize",$,!1),u?u.fire(g,A,x):M(g,A,x)}return y.reset=function(){u&&u.reset(),w&&w.reset()},y}var q;function Z(){return q||(q=V(null,{useWorker:!0,resize:!0})),q}t.exports=function(){return Z().apply(this,arguments)},t.exports.reset=function(){Z().reset()},t.exports.create=V})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),S,!1);const Te=S.exports;S.exports.create;const Ce="/chess/assets/black-avatar-e382008c.png",Ie="/chess/assets/white-avatar-c92590e8.png";let D=[[{color:"black",piece:"rook"},{color:"black",piece:"knight"},{color:"black",piece:"bishop"},{color:"black",piece:"king"},{color:"black",piece:"queen"},{color:"black",piece:"bishop"},{color:"black",piece:"knight"},{color:"black",piece:"rook"}],[{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"},{color:"black",piece:"pawn"}],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"},{color:"white",piece:"pawn"}],[{color:"white",piece:"rook"},{color:"white",piece:"knight"},{color:"white",piece:"bishop"},{color:"white",piece:"king"},{color:"white",piece:"queen"},{color:"white",piece:"bishop"},{color:"white",piece:"knight"},{color:"white",piece:"rook"}]];const m={HIGHLIGHT:"highlight",SELECTED:"selected",CAPTURE:"capture",DANGER:"danger"};let o=null,P="white",J=!1;function ee(i){let n=i.target;n instanceof HTMLButtonElement&&n.classList.contains("tile")&&ne.call(n)}const Le=()=>{let i=document.createElement("div");i.classList.add("board");let n="";D.forEach((c,k)=>{let T=c.reduce((C,I,G)=>(C+=`<button class='tile' data-row='${k}' data-column='${G}' ${I?"":"disabled='true'"} ${I?`data-color='${I.color}' data-piece='${I.piece}'`:""}></button>`,C),"");n+=`<div class='row'>${T}</div>`}),i.addEventListener("click",ee),i.innerHTML=n;let t=document.createElement("div"),a=document.createElement("div");t.innerHTML=K({img:Ce,name:"Player B",color:"black"}),a.innerHTML=K({img:Ie,name:"Player A",color:"white",highlight:!0}),document.querySelector("#app").append(t,i,a)},K=({img:i,name:n,color:t,highlight:a=!1})=>`<div class='header'>
        <img src='${i}' />
        <div>
            <span class='${a?m.HIGHLIGHT:""}' data-user-color='${t}'>${n}</span>
            <span>${t}</span>
        </div> 
    </div>`,He=i=>{i.length!==0&&(o&&(o.possibleMoves=i),i.forEach(({row:n,column:t,className:a})=>{let l=O({row:n,column:t});l.disabled=!1,l.classList.add(a)}))},Re=i=>{if(!o||(o.color==="black"?o.row>=7:o.row<=0))return;for(let t=1;t<=(o.color==="black"&&o.row===1||o.color==="white"&&o.row===6?2:1);t++){let a={row:o.color==="black"?o.row+t:o.row-t,column:o.column};if(R(a))break;i.push({...a,className:m.HIGHLIGHT})}let n=o.color==="black"?o.row+1:o.row-1;for(let t=-1;t<=1;t++){let a=o.column+t;if(a<0||a>7||t===0)continue;let l={row:n,column:a},c=R(l);c&&c.color!==o.color&&i.push({...l,className:m.CAPTURE})}},re=i=>{if(!o)return;const n=l=>{let c=R(l);return c?(c.color!==(o==null?void 0:o.color)&&i.push({...l,className:m.CAPTURE}),!0):(i.push({...l,className:m.HIGHLIGHT}),!1)};let t=o.column;for(let l=o.row-1;l>=0&&!n({row:l,column:t});l--);for(let l=o.row+1;l<=7&&!n({row:l,column:t});l++);let a=o.row;for(let l=o.column-1;l>=0&&!n({row:a,column:l});l--);for(let l=o.column+1;l<=7&&!n({row:a,column:l});l++);},te=i=>{if(!o)return;const n=a=>{let l=R(a);return l?(l.color!==(o==null?void 0:o.color)&&i.push({...a,className:m.CAPTURE}),!0):(i.push({...a,className:m.HIGHLIGHT}),!1)};let t=o.column+1;for(let a=o.row-1;a>=0&&t<=7&&!n({row:a,column:t});a--)t=t+1;t=o.column-1;for(let a=o.row-1;a>=0&&t>=0&&!n({row:a,column:t});a--)t=t-1;t=o.column-1;for(let a=o.row+1;a<=7&&t>=0&&!n({row:a,column:t});a++)t=t-1;t=o.column+1;for(let a=o.row+1;a<=7&&t<=7&&!n({row:a,column:t});a++)t=t+1},Ae=i=>{if(!o)return;const n=t=>{let{row:a,column:l}=t;if(a<0||a>7||l<0||l>7)return;let c=R(t);if(c){c.color!==(o==null?void 0:o.color)&&i.push({...t,className:m.CAPTURE});return}i.push({...t,className:m.HIGHLIGHT})};for(let t=1;t<=2;t++){let a=o.row-t,l=o.column-(t===1?2:1);n({row:a,column:l})}for(let t=1;t<=2;t++){let a=o.row-t,l=o.column+(t===1?2:1);n({row:a,column:l})}for(let t=1;t<=2;t++){let a=o.row+t,l=o.column-(t===1?2:1);n({row:a,column:l})}for(let t=1;t<=2;t++){let a=o.row+t,l=o.column+(t===1?2:1);n({row:a,column:l})}},Pe=i=>{re(i),te(i)},Ne=i=>{if(o)for(let n=-1;n<2;n++){let t=o.row+n;for(let a=-1;a<2;a++){let l=o.column+a;if(t===o.row&&l===o.column||t<0||t>7||l<0||l>7)continue;let c={row:t,column:l},k=R(c);if((k==null?void 0:k.color)!==o.color){if(k){k.color!==o.color&&i.push({...c,className:m.CAPTURE});continue}i.push({...c,className:m.HIGHLIGHT})}}}},Q=()=>{if(!o)return;let i=O({row:o.row,column:o.column});i.hasAttribute("data-piece")&&i.hasAttribute("data-color")&&(i.disabled=!1),i.classList.remove(m.HIGHLIGHT,m.SELECTED,m.CAPTURE,m.DANGER),o.possibleMoves&&o.possibleMoves.forEach(({row:n,column:t,className:a})=>{let l=O({row:n,column:t});l.disabled=(o==null?void 0:o.selectedMove)!==`${n}${t}`&&a!==m.CAPTURE,l.classList.remove(m.HIGHLIGHT,m.CAPTURE,m.DANGER)}),o=null};function Se(){if(!o)return;let i=P==="black"?"white":"black",n=document.querySelector(`[data-piece='king'][data-color='${i}']`);if(!n){let L=document.querySelector(`[data-user-color='${P}']`);L&&(L.classList.add(m.HIGHLIGHT),L.append(" (Winner)"));const N=document.createElement("canvas");document.body.append(N),Te.create(N,{resize:!0})({particleCount:100,spread:70,origin:{y:.6}});let F=document.querySelector(".board");F&&F.removeEventListener("click",ee),setTimeout(()=>{N.remove()},3e3),J=!0;return}let{row:t,column:a,piece:l}=this.dataset;if(!l)return;let c=o.row,k=o.column;o.row=+t,o.column=+a;let T=oe(l);if(o.row=c,o.column=k,T.length===0)return;let{row:C,column:I}=n.dataset;T.findIndex(L=>L.row===+C&&L.column===+I)!==-1&&n.classList.add(m.DANGER)}const Ge=()=>{P=P==="black"?"white":"black",document.querySelectorAll("[data-user-color]").forEach(n=>{n.dataset.userColor===P?n.classList.add(m.HIGHLIGHT):n.classList.remove(m.HIGHLIGHT)})},oe=i=>{let n=[];switch(i){case"pawn":Re(n);break;case"rook":re(n);break;case"bishop":te(n);break;case"knight":Ae(n);break;case"queen":Pe(n);break;case"king":Ne(n);break;default:return[]}return n};function ne(){let{color:i,piece:n,row:t,column:a}=this.dataset;if(o){let l=document.querySelector(`.${m.DANGER}`);if(l&&l.classList.remove(m.DANGER),R({row:+t,column:+a})&&!this.classList.contains(m.CAPTURE)){Q(),ne.call(this);return}let k=O({row:o.row,column:o.column});if(k.removeAttribute("data-piece"),k.removeAttribute("data-color"),this.setAttribute("data-piece",o.piece),this.setAttribute("data-color",o.color),D[+t][+a]={color:o.color,piece:o.piece},D[o.row][o.column]=null,o.selectedMove=`${t}${a}`,this.disabled=!1,Se.call(this),Q(),J)return;Ge()}else if(n&&i){if(P!==i)return;this.disabled=!0,this.classList.add(m.SELECTED),o={piece:n,color:i,row:+t,column:+a};let l=oe(n);He(l)}}const R=({row:i,column:n})=>D[i][n],O=({row:i,column:n})=>document.querySelector(`[data-row='${i}'][data-column='${n}']`);Le()});export default Fe();
